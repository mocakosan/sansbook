{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport AppLayout from \"../components/AppLayout\";\nimport Head from \"next/head\";\nimport NicknameEditForm from \"../components/NicknameEditForm\";\nimport FollowList from \"../components/FollowList\";\nimport { useSelector } from \"react-redux\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport Router from \"next/router\";\nimport useSWR from \"swr\";\nimport axios from \"axios\";\nvar fetcher = function fetcher(url) {\n  return axios.get(url, {\n    withCredentials: true\n  }).then(function (result) {\n    return result.data;\n  });\n};\nvar Profile = function Profile() {\n  var _useSelector = useSelector(function (state) {\n      return state.user;\n    }),\n    me = _useSelector.me;\n  var _useState = useState(3),\n    followingsLimit = _useState[0],\n    setFollowingsLimit = _useState[1];\n  var _useState2 = useState(3),\n    followersLimit = _useState2[0],\n    setFollowersLimit = _useState2[1];\n  var _useSWR = useSWR(\"http://localhost:3001/user/followers?limit=\".concat(followersLimit), fetcher),\n    followersData = _useSWR.data,\n    followerError = _useSWR.error;\n  var _useSWR2 = useSWR(\"http://localhost:3001/user/followings?limit=\".concat(followingsLimit), fetcher),\n    followingsData = _useSWR2.data,\n    followingError = _useSWR2.error;\n\n  // useEffect(() => { //swr사용 안할시에\n  //   dispatch({\n  //     type: LOAD_FOLLOWINGS_REQUEST,\n  //   });\n  //   dispatch({\n  //     type: LOAD_FOLLOWERS_REQUEST,\n  //   });\n  // }, []);\n\n  useEffect(function () {\n    if (!(me && me.id)) {\n      Router.push(\"/\");\n    }\n  }, [me && me.id]);\n  var loadMoreFollowers = useCallback(function () {\n    setFollowersLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n  var loadMoreFollowings = useCallback(function () {\n    setFollowingsLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n  if (!me) {\n    return \"내정보 로딩중\";\n  }\n  if (followerError || followingError) {\n    console.error(followerError || followingError);\n    return \"팔로잉/팔로워 로딩 중 에러가 발생했습니다.\";\n  }\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"\\uB0B4\\uD504\\uB85C\\uD544 | Sansbook \")), __jsx(AppLayout, null, __jsx(NicknameEditForm, null), __jsx(FollowList, {\n    header: \"\\uD314\\uB85C\\uC789\",\n    data: followingsData,\n    onClickMore: loadMoreFollowings,\n    loading: !followingError && !followingsData\n  }), __jsx(FollowList, {\n    header: \"\\uD314\\uB85C\\uC6CC\",\n    data: followersData,\n    onClickMore: loadMoreFollowers,\n    loading: !followerError && !followersData\n  })));\n};\n\n//SSR : next전용 서버사이드 렌더링 = 사용\nexport var __N_SSP = true;\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}